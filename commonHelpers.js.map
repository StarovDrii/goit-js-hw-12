{"version":3,"file":"commonHelpers.js","sources":["../src/modules/renderImagesFoo.js","../src/modules/galleryResetFoo.js","../src/modules/handlerLoadMoreBtnFoo.js","../src/modules/loadMoreImagesFoo.js","../src/modules/smoothScrollToNextGroupFoo.js","../src/main.js"],"sourcesContent":["import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nexport const gallery = document.querySelector('.gallery');\nfunction renderImages(images) {\n  const galleryMarkup = images\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) =>\n        `\n      <li class=\"gallery-item\">\n        <a href=\"${largeImageURL}\">\n          <img src=\"${webformatURL}\" alt=\"${tags}\" class=\"gallery-image\"/>\n        </a>\n        <div class=\"image-desc\">\n          <div class=\"image-desc-item\">\n            <div class=\"image-desc-label\">Likes</div>\n            <div>${likes}</div>\n          </div>\n          <div class=\"image-desc-item\">\n            <div class=\"image-desc-label\">Views</div>\n            <div>${views}</div>\n          </div>\n          <div class=\"image-desc-item\">\n            <div class=\"image-desc-label\">Comments</div>\n            <div>${comments}</div>\n          </div>\n          <div class=\"image-desc-item\">\n            <div class=\"image-desc-label\">Downloads</div>\n            <div>${downloads}</div>\n          </div>\n        </div>\n      </li>\n      `\n    )\n    .join('');\n  gallery.insertAdjacentHTML('beforeend', galleryMarkup);\n  new SimpleLightbox('.gallery a').refresh();\n}\nexport default renderImages;\n","import { loader, loadMoreBtn } from '../main.js';\nimport { gallery } from './renderImagesFoo';\n\nfunction galleryReset() {\n  gallery.innerHTML = '';\n  loader.classList.remove('is-hidden');\n  loadMoreBtn.classList.add('is-hidden');\n}\n\nexport default galleryReset;\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport { page, per_page, loadMoreBtn } from '../main.js';\n\nfunction handlerLoadMoreBtn(totalHits) {\n  const maxPages = Math.ceil(totalHits / per_page);\n  if (page > maxPages) {\n    return iziToast.show({\n      message: \"We're sorry, but you've reached the end of search results.\",\n      position: 'topRight',\n    });\n  } else {\n    loadMoreBtn.classList.remove('is-hidden');\n  }\n}\nexport default handlerLoadMoreBtn;\n","import fetchImages from '../main.js';\nimport { loader, loadMoreBtn } from '../main.js';\n\nasync function loadMoreImages() {\n  loader.classList.remove('is-hidden');\n  loadMoreBtn.classList.add('is-hidden');\n  await fetchImages();\n}\n\nexport default loadMoreImages;\n","function smoothScrollToNextGroup() {\n  let galleryItemHeight = document\n    .querySelector('.gallery-item')\n    .getBoundingClientRect().height;\n\n  window.scrollBy({ top: galleryItemHeight * 2, behavior: 'smooth' });\n}\nexport default smoothScrollToNextGroup;\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport axios from 'axios';\nimport galleryReset from './modules/galleryResetFoo.js';\nimport renderImages from './modules/renderImagesFoo.js';\nimport handlerLoadMoreBtn from './modules/handlerLoadMoreBtnFoo.js';\nimport loadMoreImages from './modules/loadMoreImagesFoo.js';\nimport smoothScrollToNextGroup from './modules/smoothScrollToNextGroupFoo.js';\n\nexport const form = document.querySelector('.form'),\n  searchInput = document.querySelector('.search-input'),\n  loader = document.querySelector('.loader'),\n  loadMoreBtn = document.querySelector('.load-more-btn');\n\nform.addEventListener('submit', handleFormSubmit);\nloadMoreBtn.addEventListener('click', loadMoreImages);\n\naxios.defaults.baseURL = 'https://pixabay.com';\n\nexport let page = 1;\nexport const per_page = 40;\nlet searchInputValue;\n\nasync function handleFormSubmit(event) {\n  event.preventDefault();\n  galleryReset();\n  page = 1;\n  searchInputValue = searchInput.value;\n  await fetchImages();\n}\n\nasync function fetchImages() {\n  const response = await axios\n    .get('/api/', {\n      params: {\n        key: '41798579-68ab5b2702b30822247f51cf8',\n        q: searchInput.value,\n        orientation: 'horizontal',\n        image_type: 'photo',\n        safesearch: true,\n        page,\n        per_page,\n      },\n    })\n    .then(response => {\n      if (response.data.hits.length === 0) {\n        return iziToast.warning({\n          title: 'Ooops',\n          message:\n            'Sorry, there are no images matching your search query. Please try again!',\n          position: 'topRight',\n        });\n      }\n      page++;\n      renderImages(response.data.hits);\n      handlerLoadMoreBtn(response.data.totalHits);\n      smoothScrollToNextGroup();\n    })\n    .catch(error => {\n      iziToast.error({\n        title: 'Error',\n        message: 'Something is wrong!',\n        position: 'topRight',\n      });\n    })\n    .finally(() => {\n      loader.classList.add('is-hidden');\n    });\n}\nexport default fetchImages;\n"],"names":["gallery","renderImages","images","galleryMarkup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","SimpleLightbox","galleryReset","loader","loadMoreBtn","handlerLoadMoreBtn","totalHits","maxPages","per_page","page","iziToast","loadMoreImages","fetchImages","smoothScrollToNextGroup","galleryItemHeight","form","searchInput","handleFormSubmit","axios","event","response","error"],"mappings":"owBAGO,MAAMA,EAAU,SAAS,cAAc,UAAU,EACxD,SAASC,EAAaC,EAAQ,CAC5B,MAAMC,EAAgBD,EACnB,IACC,CAAC,CACC,aAAAE,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACD,IACC;AAAA;AAAA,mBAEWL;AAAA,sBACGD,WAAsBE;AAAA;AAAA;AAAA;AAAA;AAAA,mBAKzBC;AAAA;AAAA;AAAA;AAAA,mBAIAC;AAAA;AAAA;AAAA;AAAA,mBAIAC;AAAA;AAAA;AAAA;AAAA,mBAIAC;AAAA;AAAA;AAAA;AAAA,OAKd,EACA,KAAK,EAAE,EACVV,EAAQ,mBAAmB,YAAaG,CAAa,EACrD,IAAIQ,EAAe,YAAY,EAAE,SACnC,CC1CA,SAASC,GAAe,CACtBZ,EAAQ,UAAY,GACpBa,EAAO,UAAU,OAAO,WAAW,EACnCC,EAAY,UAAU,IAAI,WAAW,CACvC,CCHA,SAASC,EAAmBC,EAAW,CACrC,MAAMC,EAAW,KAAK,KAAKD,EAAYE,CAAQ,EAC/C,GAAIC,EAAOF,EACT,OAAOG,EAAS,KAAK,CACnB,QAAS,6DACT,SAAU,UAChB,CAAK,EAEDN,EAAY,UAAU,OAAO,WAAW,CAE5C,CCXA,eAAeO,GAAiB,CAC9BR,EAAO,UAAU,OAAO,WAAW,EACnCC,EAAY,UAAU,IAAI,WAAW,EACrC,MAAMQ,EAAW,CACnB,CCPA,SAASC,GAA0B,CACjC,IAAIC,EAAoB,SACrB,cAAc,eAAe,EAC7B,sBAAqB,EAAG,OAE3B,OAAO,SAAS,CAAE,IAAKA,EAAoB,EAAG,SAAU,QAAQ,CAAE,CACpE,CCKO,MAAMC,EAAO,SAAS,cAAc,OAAO,EAChDC,EAAc,SAAS,cAAc,eAAe,EACpDb,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAc,SAAS,cAAc,gBAAgB,EAEvDW,EAAK,iBAAiB,SAAUE,CAAgB,EAChDb,EAAY,iBAAiB,QAASO,CAAc,EAEpDO,EAAM,SAAS,QAAU,sBAElB,IAAIT,EAAO,EACX,MAAMD,EAAW,GAGxB,eAAeS,EAAiBE,EAAO,CACrCA,EAAM,eAAc,EACpBjB,IACAO,EAAO,EACYO,EAAY,MAC/B,MAAMJ,EAAW,CACnB,CAEA,eAAeA,GAAc,CACV,MAAMM,EACpB,IAAI,QAAS,CACZ,OAAQ,CACN,IAAK,qCACL,EAAGF,EAAY,MACf,YAAa,aACb,WAAY,QACZ,WAAY,GACZ,KAAAP,EACA,SAAAD,CACD,CACP,CAAK,EACA,KAAKY,GAAY,CAChB,GAAIA,EAAS,KAAK,KAAK,SAAW,EAChC,OAAOV,EAAS,QAAQ,CACtB,MAAO,QACP,QACE,2EACF,SAAU,UACpB,CAAS,EAEHD,IACAlB,EAAa6B,EAAS,KAAK,IAAI,EAC/Bf,EAAmBe,EAAS,KAAK,SAAS,EAC1CP,GACN,CAAK,EACA,MAAMQ,GAAS,CACdX,EAAS,MAAM,CACb,MAAO,QACP,QAAS,sBACT,SAAU,UAClB,CAAO,CACP,CAAK,EACA,QAAQ,IAAM,CACbP,EAAO,UAAU,IAAI,WAAW,CACtC,CAAK,CACL"}